<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Simulated Survival times or Recurrent Events — simEvent • reda</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">reda</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/reda-intro.html">Introduction to reda through Examples</a>
    </li>
    <li>
      <a href="../articles/reda-simulate.html">Simulate Survival and Recurrent Event Data with reda</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/wenjie2wang/reda">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Simulated Survival times or Recurrent Events</h1>
    </div>

    
    <p>The function <code>simEvent</code> generates simulated recurrent events or
survival time (the first event time) from one stochastic process. The
function <code>simEventData</code> provides a simple wrapper that calls
<code>simEvent</code> internally and collects the generated survival data or
recurrent events into a data frame. More examples are available in one of
the package vignettes in addition to the function documentation.</p>
    

    <pre class="usage"><span class='fu'>simEvent</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>rho</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>rhoCoef</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>origin</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>endTime</span> <span class='kw'>=</span> <span class='fl'>3</span>,
         <span class='kw'>frailty</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>recurrent</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>interarrival</span> <span class='kw'>=</span> <span class='st'>"rexp"</span>,
         <span class='kw'>relativeRisk</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"exponential"</span>, <span class='st'>"linear"</span>, <span class='st'>"excess"</span>, <span class='st'>"none"</span>),
         <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"thinning"</span>, <span class='st'>"inversion"</span>), <span class='kw'>arguments</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='no'>...</span>)

<span class='fu'>simEventData</span>(<span class='no'>nProcess</span>, <span class='kw'>z</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>origin</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>endTime</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>frailty</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>z</th>
      <td><p>Time-invariant or time-varying covariates. The default value is
<code>0</code> for no covariate effect.  This argument should be a numeric
vector for time-invariant covariates or a function of times that returns
a numeric matrix for time-varying covariates, where each row represents
the covariate vector at one perticular time point.</p></td>
    </tr>
    <tr>
      <th>zCoef</th>
      <td><p>Time-invariant or time-varying coefficients of covariates. The
default value is <code>1</code>. Similar to the argument <code>z</code>, this
argument should be a numeric vector for time-invariant coefficients or a
function of times that returns a numeric matrix for time-varying
coefficients, where each row represents the coefficient vector at one
perticular time point. The dimension of the <code>z</code> and <code>zCoef</code>
(either specified or generated) has to match with each other.</p></td>
    </tr>
    <tr>
      <th>rho</th>
      <td><p>Baseline rate (or intensity) function for the Poisson process.
The default is <code>1</code> for a homogenous process of unit intensity. This
argument can be either a non-negative numeric value for a homogenous
process or a function of times for a non-homogenous process. In the
latter case, the function should be able to take a vector of time points
and return a numerical matrix (or vector) with each row representing the
baseline hazard rate vector (or scalar value) at each time point.</p></td>
    </tr>
    <tr>
      <th>rhoCoef</th>
      <td><p>Coefficients of baseline rate function. The default value is
<code>1</code>. It can be useful when <code>rho</code> is a function generating
spline bases.</p></td>
    </tr>
    <tr>
      <th>origin</th>
      <td><p>The time origin set to be <code>0</code> by default. It should be
either a numeric value less than <code>endTime</code> or a function that
returns such a numeric value.</p></td>
    </tr>
    <tr>
      <th>endTime</th>
      <td><p>The end of follow-up time set to be <code>3</code> by default.
Similar to <code>origin</code>, <code>endTime</code> should be either a numeric
value greater than <code>origin</code> or a function that returns such a
numeric value.</p></td>
    </tr>
    <tr>
      <th>frailty</th>
      <td><p>A positive number or a function for frailty effect. The
default value is <code>1</code> for no frailty effect.  Other positive value
can be specified directly for a shared frailty effect within a cluster.
Similar to <code>z</code>, <code>zCoef</code>, and <code>rho</code>, a function can be
specified for other distribution of the frailty effect. The specified
function should randomly return a positive numeric value. The functions
that generate random numbers following a certain distribution from
<code>stats</code> package can be directly used. The arguments of the function
can be specified through a list named <code>frailty</code> in
<code>arguments</code>. For example, if we consider Gamma distribution with
mean one as the distribution of frailty effect, we may specify
<code>frailty = "rgamma"</code>. The shape and scale parameter needs to be
specified through a list named <code>frailty</code> in <code>arguments</code>, such
as <code>arguments = list(frailty = list(shape = 2, scale = 0.5))</code>.</p></td>
    </tr>
    <tr>
      <th>recurrent</th>
      <td><p>A logical value with default value <code>TRUE</code> indicating
whether to generate recurrent event data or survival data.</p></td>
    </tr>
    <tr>
      <th>interarrival</th>
      <td><p>A function object for randomly generating (positive)
interarrival time between two successive arrivals/events.  The default
value is <code>"rexp"</code> (i.e., function <code><a href='http://www.rdocumentation.org/packages/stats/topics/Exponential'>rexp</a></code>) for
generating interarrival times following exponential distribution, which
leads to a Poisson process. If the assumption of exponential
interarrival times cannot be justified, we may consider a renewal
process, (a generalization of Poisson process), in which interarrival
times between events independently follows an identical distribution. A
customized function can be specified in this case. It must have at least
one argument named <code>rate</code> for the expected number of
arrivals/events in unit time and returns one positive numerical
value. If the function contains an argument named <code>n</code>, it is
assumed that the function returns <code>n</code> interarrival times in one
function call to possibly speed up the random number generation
procedure.  Other arguments can be specified through a named list inside
<code>arguments</code>.</p></td>
    </tr>
    <tr>
      <th>relativeRisk</th>
      <td><p>Relateive risk function for incorporating the covariates
and the covariate coefficients into the intensity function. The
applicable choices include <code>exponential</code> (the default) for the
regular Cox model or Andersen-Gill model, <code>linear</code> for linear model
(including an intercept term), <code>excess</code> for excess model, and
<code>none</code> for not incorporating the covariates through a relative risk
function. A customized function can be specified. The specified function
must have at least one argument named <code>z</code> for the covariate vector
and another argument named zCoef for covariate coefficient vector.
The function should return a numeric value for given <code>z</code> vector and
<code>zCoef</code> vector.  Other arguments can be specified through a named
list inside <code>arguments</code>.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>A character string specifying the method for generating
simulated recurrent or survival data. The default method is thinning
method (Lewis and Shedler 1979). Another available option is the
inversion method (Cinlar 1975). When the rate function may go to
infinite, the inversion method is used and a warning will be thrown out
if the thinning method is initially specified.</p></td>
    </tr>
    <tr>
      <th>arguments</th>
      <td><p>A list that consists of named lists for specifying other
arguments in the corresponding functions. For example, if a function of
time named <code>foo</code> with two arguments, <code>x</code> (for time) and
<code>y</code>, is specified for the time-varying covariates, the value of its
second argument, <code>y</code>, can be specified by <code>arguments = list(z
= list(y = 1)</code>.  A partial matching on names is not allowed to avoid
possible misspecification. The input arguments will be evaluated within
function <code>simEvent</code>, which can be useful for randomly setting
function parameters for each process in function
<code>simEventData</code>. See examples and vignettes for details.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguements passed from function <code>simEventData</code> to
fucntion <code>simEvent</code>. For function <code>simEvent</code>, <code>...</code> is
not used.</p></td>
    </tr>
    <tr>
      <th>nProcess</th>
      <td><p>Number of stochastic processes. If missing, the value will
be the number of row of the specified matrix <code>z</code>. Otherwise, a
positive number should be speicified.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function <code>simEvent</code> returns a <code>simEvent</code> S4 class object and
the function <code>simEventData</code> returns a <code>data.frame</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For each process, a time-invariant or time-varying baseline hazard rate
(intensity) function of failure can be specified.  Covariates and their
coefficients can be specified and incorporated by the specified relative
risk functions. The default is the exponential relative risk function, which
corresponds to the Cox proportional hazard model (Cox 1972) for survival
data or Andersen-Gill model (Andersen and Gill 1982) for recurrent
events. Other relative risk function can be specified through the argument
<code>relativeRisk</code>. In addition, a frailty effect can be considered.
Conditional on predictors (or covariates) and the unobserved frailty effect,
the process is by default a Poisson process, where the interarrival times
between two successive arrivals/events follow exponential distribution. A
general renewal process can be specified through <code>interarrival</code> for
other distributions of the interarrival times in addition to the exponential
distribution.</p>
<p>The thinning method (Lewis and Shedler 1979) is applied for bounded hazard
rate function by default. The inversion method (Cinlar 1975) is also
available for possibly unbounded but integrable rate function over the given
time period. The inversion method will be used when the rate function may go
to infinite and a warning will be thrown out if the thinning method is
specified originally.</p>
<p>For the covariates <code>z</code>, the covariate coefficients <code>zCoef</code>, and
the baseline hazard rate function <code>rho</code>, a function of time can be
specified for time-varying effect.  The first argument of the input function
has to be the time variable (not need to be named as "time" though). Other
arguments of the function can be specified through a named list in
<code>arguments</code>, while the first argument should not be specified.</p>
<p>For the frailty effect <code>frailty</code>, the starting point <code>origin</code>, and
the end point of the process <code>endTime</code>, functions that generate random
numbers can be specified. An argument <code>n = 1</code> will be implicitly
specified if the function has an argument named <code>n</code>, which is designed
for those common functions generating random numbers from <span class="pkg">stats</span>
package. Similar to <code>z</code>, <code>zCoef</code>, and <code>rho</code>, other arguments
of the function can be specified through a named list in <code>arguments</code>.</p>
<p>For time-varying covariates, the function <code>simEventData</code> assumes
covariates can be observed only at event times and censoring times. Thus,
covariate values are returned only at these time points. If we want other
observed covariate values to be recorded, we may write a simple wrapper
function for <code>simEvent</code> similar to <code>simEventData</code>.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Andersen, P. K., &amp; Gill, R. D. (1982). Cox's regression model for counting
processes: A large sample study. <em>The annals of statistics</em>, 10(4),
1100--1120.</p>
<p>Cinlar, Erhan (1975). <em>Introduction to stochastic processes</em>. Englewood
Cliffs, NJ: Printice-Hall.</p>
<p>Cox, D. R. (1972). Regression models and life-tables.
<em>Journal of the Royal Statistical Society. Series B
(Methodological)</em>, 34(2), 187--220.</p>
<p>Lewis, P. A., &amp; G. S. Shedler. (1979). Simulation of
Nonhomogeneous Poisson Processes by Thinning.
<em>Naval Research Logistics Quarterly</em>,
26(3), Wiley Online Library: 403--13.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>library</span>(<span class='no'>reda</span>)
<span class='fu'>set.seed</span>(<span class='fl'>123</span>)
<span class='co'>### time-invariant covariates and coefficients</span>
<span class='co'>## one process</span>
<span class='fu'>simEvent</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0.5</span>, <span class='fl'>1</span>), <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>0</span>))</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 0.5115827 0.8613145 1.6674270 1.6865797 1.7206733 1.9126410 2.1032295
#&gt; [8] 2.1913383</div><div class='input'><span class='fu'>simEvent</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>recurrent</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 0.2903829</div><div class='input'>
<span class='co'>## simulated data</span>
<span class='fu'>simEventData</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0.5</span>, <span class='fl'>1</span>), <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>0</span>), <span class='kw'>endTime</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='output co'>#&gt;   ID      time event origin X.1 X.2
#&gt; 1  1 0.4591666     1      0 0.5   1
#&gt; 2  1 0.4784347     1      0 0.5   1
#&gt; 3  1 0.8410489     1      0 0.5   1
#&gt; 4  1 2.0000000     0      0 0.5   1</div><div class='input'><span class='fu'>simEventData</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>cbind</span>(<span class='fu'>rnorm</span>(<span class='fl'>3</span>), <span class='fl'>1</span>), <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>0</span>))</div><div class='output co'>#&gt;    ID      time event origin       X.1 X.2
#&gt; 1   1 0.2079348     1      0 0.8951257   1
#&gt; 2   1 0.3135230     1      0 0.8951257   1
#&gt; 3   1 0.4852657     1      0 0.8951257   1
#&gt; 4   1 3.0000000     0      0 0.8951257   1
#&gt; 5   2 0.6963856     1      0 0.8781335   1
#&gt; 6   2 1.8288953     1      0 0.8781335   1
#&gt; 7   2 2.3741750     1      0 0.8781335   1
#&gt; 8   2 2.4118209     1      0 0.8781335   1
#&gt; 9   2 2.5390663     1      0 0.8781335   1
#&gt; 10  2 2.9825551     1      0 0.8781335   1
#&gt; 11  2 3.0000000     0      0 0.8781335   1
#&gt; 12  3 0.1471895     1      0 0.8215811   1
#&gt; 13  3 0.2723684     1      0 0.8215811   1
#&gt; 14  3 0.9596983     1      0 0.8215811   1
#&gt; 15  3 0.9782061     1      0 0.8215811   1
#&gt; 16  3 1.0215776     1      0 0.8215811   1
#&gt; 17  3 1.0649221     1      0 0.8215811   1
#&gt; 18  3 1.1882175     1      0 0.8215811   1
#&gt; 19  3 1.3182856     1      0 0.8215811   1
#&gt; 20  3 1.7458978     1      0 0.8215811   1
#&gt; 21  3 2.1522257     1      0 0.8215811   1
#&gt; 22  3 2.8744498     1      0 0.8215811   1
#&gt; 23  3 3.0000000     0      0 0.8215811   1</div><div class='input'><span class='fu'>simEventData</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>matrix</span>(<span class='fu'>rnorm</span>(<span class='fl'>5</span>)), <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>recurrent</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt;   ID      time event origin          X
#&gt; 1  1 0.8635377     1      0 -0.2288958
#&gt; 2  2 2.9133870     1      0 -0.9007918
#&gt; 3  3 1.0878381     1      0 -0.7350262
#&gt; 4  4 1.7275950     1      0 -1.4276858
#&gt; 5  5 0.6040343     1      0  0.6192835</div><div class='input'>

<span class='co'>### time-varying covariates and time-varying coefficients</span>
<span class='no'>zFun</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>time</span>, <span class='no'>intercept</span>) {
   <span class='fu'>cbind</span>(<span class='no'>time</span> / <span class='fl'>10</span> + <span class='no'>intercept</span>, <span class='fu'>as.numeric</span>(<span class='no'>time</span> <span class='kw'>&gt;</span> <span class='fl'>1</span>))
}
<span class='no'>zCoefFun</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>shift</span>) {
  <span class='fu'>cbind</span>(<span class='fu'>sqrt</span>(<span class='no'>x</span> + <span class='no'>shift</span>), <span class='fl'>1</span>)
}
<span class='fu'>simEvent</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='no'>zFun</span>, <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='no'>zCoefFun</span>,
         <span class='kw'>arguments</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fl'>0.1</span>),
                          <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>shift</span> <span class='kw'>=</span> <span class='fl'>0.1</span>)))</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt;  [1] 0.01703579 0.69742521 1.25021917 1.26152287 1.36531462 1.68015169
#&gt;  [7] 1.91858209 2.15412550 2.23913149 2.24511429 2.27295262 2.46185550
#&gt; [13] 2.65875740</div><div class='input'>
<span class='co'>## same function of time for all processes</span>
<span class='fu'>simEventData</span>(<span class='fl'>3</span>, <span class='kw'>z</span> <span class='kw'>=</span> <span class='no'>zFun</span>, <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='no'>zCoefFun</span>,
             <span class='kw'>arguments</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fl'>0.1</span>),
                              <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>shift</span> <span class='kw'>=</span> <span class='fl'>0.1</span>)))</div><div class='output co'>#&gt;    ID      time event origin       X.1 X.2
#&gt; 1   1 1.4109295     1      0 0.2410929   1
#&gt; 2   1 1.5959107     1      0 0.2595911   1
#&gt; 3   1 1.6432538     1      0 0.2643254   1
#&gt; 4   1 1.7703764     1      0 0.2770376   1
#&gt; 5   1 1.9455848     1      0 0.2945585   1
#&gt; 6   1 2.0786444     1      0 0.3078644   1
#&gt; 7   1 2.2809732     1      0 0.3280973   1
#&gt; 8   1 2.5132731     1      0 0.3513273   1
#&gt; 9   1 2.8100794     1      0 0.3810079   1
#&gt; 10  1 2.8286202     1      0 0.3828620   1
#&gt; 11  1 2.9028344     1      0 0.3902834   1
#&gt; 12  1 3.0000000     0      0 0.4000000   1
#&gt; 13  2 0.1832995     1      0 0.1183299   0
#&gt; 14  2 0.4628561     1      0 0.1462856   0
#&gt; 15  2 0.9558699     1      0 0.1955870   0
#&gt; 16  2 1.9629071     1      0 0.2962907   1
#&gt; 17  2 2.2029446     1      0 0.3202945   1
#&gt; 18  2 2.3722549     1      0 0.3372255   1
#&gt; 19  2 2.4296379     1      0 0.3429638   1
#&gt; 20  2 2.4559745     1      0 0.3455974   1
#&gt; 21  2 2.6248355     1      0 0.3624836   1
#&gt; 22  2 2.6718292     1      0 0.3671829   1
#&gt; 23  2 2.7697645     1      0 0.3769764   1
#&gt; 24  2 2.7834718     1      0 0.3783472   1
#&gt; 25  2 2.8068352     1      0 0.3806835   1
#&gt; 26  2 3.0000000     0      0 0.4000000   1
#&gt; 27  3 0.3323904     1      0 0.1332390   0
#&gt; 28  3 1.1144789     1      0 0.2114479   1
#&gt; 29  3 1.1855470     1      0 0.2185547   1
#&gt; 30  3 1.3831537     1      0 0.2383154   1
#&gt; 31  3 1.8689437     1      0 0.2868944   1
#&gt; 32  3 2.1737468     1      0 0.3173747   1
#&gt; 33  3 2.3238397     1      0 0.3323840   1
#&gt; 34  3 2.3543533     1      0 0.3354353   1
#&gt; 35  3 2.4386507     1      0 0.3438651   1
#&gt; 36  3 2.7497916     1      0 0.3749792   1
#&gt; 37  3 2.8391334     1      0 0.3839133   1
#&gt; 38  3 3.0000000     0      0 0.4000000   1</div><div class='input'>
<span class='co'>## same function within one process but different between processes</span>
<span class='co'>## use quote function in the arguments</span>
<span class='no'>simDat</span> <span class='kw'>&lt;-</span> <span class='fu'>simEventData</span>(<span class='fl'>3</span>, <span class='kw'>z</span> <span class='kw'>=</span> <span class='no'>zFun</span>, <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='no'>zCoefFun</span>,
                       <span class='kw'>arguments</span> <span class='kw'>=</span> <span class='fu'>list</span>(
                           <span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fu'>quote</span>(<span class='fu'>rnorm</span>(<span class='fl'>1</span>) / <span class='fl'>10</span>)),
                           <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>shift</span> <span class='kw'>=</span> <span class='fl'>0.1</span>)
                       ))
<span class='co'>## check the intercept randomly generated,</span>
<span class='co'>## which should be the same within each ID but different between IDs.</span>
<span class='fu'>unique</span>(<span class='fu'>with</span>(<span class='no'>simDat</span>, <span class='fu'>cbind</span>(<span class='no'>ID</span>, <span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fu'>round</span>(<span class='no'>X.1</span> - <span class='no'>time</span> / <span class='fl'>10</span>, <span class='fl'>6</span>))))</div><div class='output co'>#&gt;      ID intercept
#&gt; [1,]  1  0.087936
#&gt; [2,]  2  0.046494
#&gt; [3,]  3  0.131681</div><div class='input'>

<span class='co'>### non-negative time-varying baseline hazard rate function</span>
<span class='fu'>simEvent</span>(<span class='kw'>rho</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>timeVec</span>) { <span class='fu'>sin</span>(<span class='no'>timeVec</span>) + <span class='fl'>1</span> })</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 1.336428 1.655383 2.337511 2.431350 2.887220</div><div class='input'><span class='fu'>simEventData</span>(<span class='fl'>3</span>, <span class='kw'>origin</span> <span class='kw'>=</span> <span class='fu'>rnorm</span>(<span class='fl'>3</span>), <span class='kw'>endTime</span> <span class='kw'>=</span> <span class='fu'>rnorm</span>(<span class='fl'>3</span>, <span class='fl'>5</span>),
             <span class='kw'>rho</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>timeVec</span>) { <span class='fu'>sin</span>(<span class='no'>timeVec</span>) + <span class='fl'>1</span> })</div><div class='output co'>#&gt;    ID       time event      origin X
#&gt; 1   1  1.8825263     1  0.00729009 0
#&gt; 2   1  1.9038402     1  0.00729009 0
#&gt; 3   1  3.1337841     1  0.00729009 0
#&gt; 4   1  4.2783956     0  0.00729009 0
#&gt; 5   2  1.2323134     1  1.01755864 0
#&gt; 6   2  1.5635354     1  1.01755864 0
#&gt; 7   2  1.7543646     1  1.01755864 0
#&gt; 8   2  1.7767004     1  1.01755864 0
#&gt; 9   2  2.6526406     1  1.01755864 0
#&gt; 10  2  3.0130011     1  1.01755864 0
#&gt; 11  2  3.1478016     1  1.01755864 0
#&gt; 12  2  3.1873625     1  1.01755864 0
#&gt; 13  2  6.5192177     0  1.01755864 0
#&gt; 14  3 -0.9590731     1 -1.18843404 0
#&gt; 15  3 -0.3631609     1 -1.18843404 0
#&gt; 16  3 -0.1507877     1 -1.18843404 0
#&gt; 17  3  1.8134301     1 -1.18843404 0
#&gt; 18  3  2.4938328     1 -1.18843404 0
#&gt; 19  3  2.7181862     1 -1.18843404 0
#&gt; 20  3  5.3773880     0 -1.18843404 0</div><div class='input'><span class='co'>## specify other arguments</span>
<span class='fu'>simEvent</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fu'>rnorm</span>(<span class='fl'>1</span>), <span class='fu'>rbinom</span>(<span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>0.5</span>)) / <span class='fl'>10</span>,
         <span class='kw'>rho</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>a</span>, <span class='no'>b</span>) { <span class='fu'>sin</span>(<span class='no'>a</span> + <span class='no'>b</span>) + <span class='fl'>1</span> },
         <span class='kw'>arguments</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>rho</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>b</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)))</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 0.3575603 1.0572763 1.6624542 1.8274776 2.1770491</div><div class='input'><span class='fu'>simEventData</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>cbind</span>(<span class='fu'>rnorm</span>(<span class='fl'>3</span>), <span class='fu'>rbinom</span>(<span class='fl'>3</span>, <span class='fl'>1</span>, <span class='fl'>0.5</span>)) / <span class='fl'>10</span>,
             <span class='kw'>rho</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>a</span>, <span class='no'>b</span>) { <span class='fu'>sin</span>(<span class='no'>a</span> + <span class='no'>b</span>) + <span class='fl'>1</span> },
             <span class='kw'>arguments</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>rho</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>b</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)))</div><div class='output co'>#&gt;    ID      time event origin         X.1 X.2
#&gt; 1   1 0.3168247     1      0  0.08842508 0.1
#&gt; 2   1 0.6545106     1      0  0.08842508 0.1
#&gt; 3   1 1.1262112     1      0  0.08842508 0.1
#&gt; 4   1 1.4285794     1      0  0.08842508 0.1
#&gt; 5   1 1.7504449     1      0  0.08842508 0.1
#&gt; 6   1 3.0000000     0      0  0.08842508 0.1
#&gt; 7   2 0.4292104     1      0 -0.08294776 0.1
#&gt; 8   2 1.1148960     1      0 -0.08294776 0.1
#&gt; 9   2 1.2032776     1      0 -0.08294776 0.1
#&gt; 10  2 1.2639104     1      0 -0.08294776 0.1
#&gt; 11  2 1.4494407     1      0 -0.08294776 0.1
#&gt; 12  2 2.0144258     1      0 -0.08294776 0.1
#&gt; 13  2 2.0402714     1      0 -0.08294776 0.1
#&gt; 14  2 3.0000000     0      0 -0.08294776 0.1
#&gt; 15  3 1.1975386     1      0 -0.05735603 0.0
#&gt; 16  3 1.2009079     1      0 -0.05735603 0.0
#&gt; 17  3 1.9563431     1      0 -0.05735603 0.0
#&gt; 18  3 2.4848427     1      0 -0.05735603 0.0
#&gt; 19  3 2.9122310     1      0 -0.05735603 0.0
#&gt; 20  3 3.0000000     0      0 -0.05735603 0.0</div><div class='input'>
<span class='co'>## quadratic B-splines with one internal knot at "time = 1"</span>
<span class='co'>## (using function 'bSpline' from splines2 package)</span>
<span class='fu'>simEvent</span>(<span class='kw'>rho</span> <span class='kw'>=</span> <span class='kw pkg'>splines2</span><span class='kw ns'>::</span><span class='no'><a href='http://www.rdocumentation.org/packages/splines2/topics/bSpline'>bSpline</a></span>, <span class='kw'>rhoCoef</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0.8</span>, <span class='fl'>0.5</span>, <span class='fl'>1</span>, <span class='fl'>0.6</span>),
         <span class='kw'>arguments</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>rho</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>degree</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>knots</span> <span class='kw'>=</span> <span class='fl'>1</span>,
                                     <span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                                     <span class='kw'>Boundary.knots</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0</span>, <span class='fl'>3</span>))))</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 0.09089787 0.21678348 1.06873299 1.96199882</div><div class='input'>

<span class='co'>### frailty effect</span>
<span class='co'>## Gamma distribution with mean one</span>
<span class='fu'>simEvent</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0.5</span>, <span class='fl'>1</span>), <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>0</span>), <span class='kw'>frailty</span> <span class='kw'>=</span> <span class='no'>rgamma</span>,
         <span class='kw'>arguments</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>frailty</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>shape</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)))</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 0.3961255 0.5721497 0.9267213 0.9505554 1.5040362 1.5561853</div><div class='input'>
<span class='co'>## lognormal with mean zero (on the log scale)</span>
<span class='fu'>set.seed</span>(<span class='fl'>123</span>)
<span class='fu'>simEvent</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0.5</span>, <span class='fl'>1</span>), <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>0</span>), <span class='kw'>frailty</span> <span class='kw'>=</span> <span class='st'>"rlnorm"</span>,
         <span class='kw'>arguments</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>frailty</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>sdlog</span> <span class='kw'>=</span> <span class='fl'>1</span>)))</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 1.411910 1.445456 1.505172 1.841404 2.175221 2.329544</div><div class='input'><span class='co'>## or equivalently</span>
<span class='fu'>set.seed</span>(<span class='fl'>123</span>)
<span class='no'>logNorm</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>a</span>) <span class='fu'>exp</span>(<span class='fu'>rnorm</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>mean</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>sd</span> <span class='kw'>=</span> <span class='no'>a</span>))
<span class='fu'>simEvent</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0.5</span>, <span class='fl'>1</span>), <span class='kw'>zCoef</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>0</span>), <span class='kw'>frailty</span> <span class='kw'>=</span> <span class='no'>logNorm</span>,
         <span class='kw'>arguments</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>frailty</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>a</span> <span class='kw'>=</span> <span class='fl'>1</span>)))</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 1.411910 1.445456 1.505172 1.841404 2.175221 2.329544</div><div class='input'>
<span class='co'>### renewal process</span>
<span class='co'>## interarrival times following uniform distribution</span>
<span class='no'>rUnif</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>n</span>, <span class='no'>rate</span>, <span class='no'>min</span>) <span class='fu'>runif</span>(<span class='no'>n</span>, <span class='no'>min</span>, <span class='kw'>max</span> <span class='kw'>=</span> <span class='fl'>2</span> / <span class='no'>rate</span>)
<span class='fu'>simEvent</span>(<span class='kw'>interarrival</span> <span class='kw'>=</span> <span class='no'>rUnif</span>,
         <span class='kw'>arguments</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>interarrival</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>min</span> <span class='kw'>=</span> <span class='fl'>0</span>)))</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 1.311412 2.728473</div><div class='input'>
<span class='co'>## interarrival times following Gamma distribution with scale one</span>
<span class='fu'>set.seed</span>(<span class='fl'>123</span>)
<span class='fu'>simEvent</span>(<span class='kw'>interarrival</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>n</span>, <span class='no'>rate</span>) <span class='fu'>rgamma</span>(<span class='no'>n</span>, <span class='kw'>shape</span> <span class='kw'>=</span> <span class='fl'>1</span> / <span class='no'>rate</span>))</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 0.1822171 1.8779682</div><div class='input'><span class='co'>## or equivalently</span>
<span class='fu'>set.seed</span>(<span class='fl'>123</span>)
<span class='fu'>simEvent</span>(<span class='kw'>interarrival</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>rate</span>) <span class='fu'>rgamma</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>shape</span> <span class='kw'>=</span> <span class='fl'>1</span> / <span class='no'>rate</span>))</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 0.1822171 1.8779682</div><div class='input'>
<span class='co'>### relative risk functioin</span>
<span class='fu'>set.seed</span>(<span class='fl'>123</span>)
<span class='fu'>simEvent</span>(<span class='kw'>relativeRisk</span> <span class='kw'>=</span> <span class='st'>"linear"</span>)</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 0.8434573 1.4200675 2.7491224 2.7806998 2.8369107</div><div class='input'><span class='co'>## or equivalently</span>
<span class='no'>rriskFun</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>z</span>, <span class='no'>zCoef</span>, <span class='no'>intercept</span>) {
    <span class='fu'>as.numeric</span>(<span class='no'>z</span> <span class='kw'>%*%</span> <span class='no'>zCoef</span>) + <span class='no'>intercept</span>
}
<span class='fu'>set.seed</span>(<span class='fl'>123</span>)
<span class='fu'>simEvent</span>(<span class='kw'>relativeRisk</span> <span class='kw'>=</span> <span class='no'>rriskFun</span>,
         <span class='kw'>arguments</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>relativeRisk</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fl'>1</span>)))</div><div class='output co'>#&gt; 'simEvent' S4 class object:
#&gt; [1] 0.8434573 1.4200675 2.7491224 2.7806998 2.8369107</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Wenjie Wang, Haoda Fu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
